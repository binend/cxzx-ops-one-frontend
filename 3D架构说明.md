# 3D 系统架构监控说明

## 功能特性

### 🎯 核心功能
- **3D可视化系统架构** - 直观展示系统各组件的3D模型
- **实时状态监控** - 在线/离线状态实时显示
- **数据流动画** - 动态展示数据流向和传输过程
- **交互式操作** - 鼠标控制视角旋转、缩放、平移

### 🎮 交互控制
- **视角切换** - 支持俯视图、侧视图、重置视角
- **节点选择** - 点击节点查看详细信息
- **自动旋转** - 可开关的自动旋转展示
- **全屏模式** - 沉浸式3D体验

### 📊 监控信息
- **节点信息** - 显示节点名称、类型、状态
- **系统统计** - 总节点数、在线节点数、数据流数量
- **状态指示** - 颜色编码显示节点运行状态

## 节点类型说明

| 节点类型 | 3D模型 | 颜色 | 说明 |
|---------|--------|------|------|
| 负载均衡器 | 八面体 | 绿色 | 请求分发 |
| Web服务器 | 立方体 | 蓝色 | 前端服务 |
| 数据库 | 圆柱体 | 橙色 | 数据存储 |
| 缓存 | 四面体 | 粉色 | 缓存服务 |
| 微服务 | 球体 | 紫色 | 业务服务 |

## 使用方法

### 1. 访问3D架构页面
在浏览器中访问：`http://localhost:8848/#/system-architecture-3d`

### 2. 视角控制
- **左键拖拽** - 旋转视角
- **右键拖拽** - 平移视图
- **滚轮** - 缩放大小
- **控制面板** - 快速切换预设视角

### 3. 节点交互
- **点击节点** - 查看节点详细信息
- **节点状态** - 绿色表示在线，红色表示离线
- **数据流** - 青色粒子表示数据传输方向

### 4. 动画控制
- **数据流动画** - 开启后显示粒子流动效果
- **自动旋转** - 场景自动旋转展示

## 自定义配置

### 修改系统架构
编辑 `src/components/ReThree3D/SystemArchitecture3D.vue` 文件：

```typescript
// 在 createNodes() 函数中修改节点配置
const nodeConfigs: Omit<SystemNode, 'position'>[] = [
  { id: 'your-node-id', name: '节点名称', type: 'server', status: 'online' },
  // 添加更多节点...
]

// 在 createDataFlows() 函数中修改数据流
const flowConfigs = [
  { from: 'source-node-id', to: 'target-node-id' },
  // 添加更多数据流...
]
```

### 添加新节点类型
1. 在 `getNodeColor()` 函数中添加新类型的颜色
2. 在 `createNodeMesh()` 函数中添加对应的3D模型
3. 在 `calculateNodePosition()` 函数中调整布局

## 技术栈

- **Three.js** - 3D图形渲染引擎
- **Vue 3** - 前端框架
- **TypeScript** - 类型安全
- **Element Plus** - UI组件库

## 性能优化

- 使用 `requestAnimationFrame` 优化动画性能
- 粒子系统采用 `BufferGeometry` 提升渲染效率
- 场景对象按需创建和销毁
- 支持 WebWorker 后续扩展

## 扩展功能

### 计划中的功能
- [ ] 实时性能指标显示
- [ ] 告警和异常状态通知
- [ ] 历史数据回放
- [ ] 多租户架构支持
- [ ] 导出3D场景图片/视频
- [ ] VR/AR模式支持

### API集成
可以集成实际的监控API，获取真实的系统状态：

```typescript
// 示例API调用
const fetchSystemStatus = async () => {
  const response = await fetch('/api/system/status')
  const data = await response.json()
  // 更新节点状态
  updateNodeStatus(data.nodes)
}
```

## 故障排除

### 常见问题

1. **3D场景不显示**
   - 检查浏览器是否支持WebGL
   - 确认Three.js依赖已正确安装

2. **性能问题**
   - 减少节点数量
   - 关闭不必要的动画效果
   - 检查硬件加速是否开启

3. **TypeScript编译错误**
   - 确保已安装 `@types/three`
   - 检查类型定义是否正确

### 调试技巧
- 使用浏览器开发者工具查看3D渲染性能
- 检查控制台错误信息
- 使用 `console.log` 输出调试信息